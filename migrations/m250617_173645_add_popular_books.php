<?php

use yii\db\Migration;

class m250617_173645_add_popular_books extends Migration
{
    /**
     * {@inheritdoc}
     */
    public function safeUp()
    {
		// Массив популярных авторов
        $authors = [
            ['full_name' => 'Лев Толстой'],
			['full_name' => 'Фёдор Достоевский'],
			['full_name' => 'Антон Чехов'],
			['full_name' => 'Александр Пушкин'],
			['full_name' => 'Михаил Булгаков'],
			['full_name' => 'Джордж Оруэлл'],
			['full_name' => 'Эрнест Хемингуэй'],
			['full_name' => 'Фрэнсис Скотт Фицджеральд'],
			['full_name' => 'Джоан Роулинг'],
			['full_name' => 'Джон Толкин'],
			['full_name' => 'Харпер Ли'],
			['full_name' => 'Джейн Остин'],
			['full_name' => 'Чарльз Диккенс'],
			['full_name' => 'Марк Твен'],
			['full_name' => 'Габриэль Гарсиа Маркес'],
			['full_name' => 'Николай Гоголь'],
			['full_name' => 'Иван Тургенев'],
			['full_name' => 'Максим Горький'],
			['full_name' => 'Илья Ильф'],
			['full_name' => 'Евгений Петров'],
			['full_name' => 'Михаил Шолохов'],
			['full_name' => 'Борис Пастернак'],
			['full_name' => 'Иван Гончаров'],
			['full_name' => 'Александр Островский'],
			['full_name' => 'Николай Лесков'],
			['full_name' => 'Александр Грибоедов'],
        ];

        // Вставляем авторов
        foreach ($authors as $author) {
            $this->insert('{{%author}}', [
                'full_name' => $author['full_name'],
                'created_at' => time(),
                'updated_at' => time(),
            ]);
        }

        // Массив популярных книг
        $books = [
            ['title' => 'Война и мир', 'year' => 1869, 'isbn' => '978-5-699-12082-1'],
            ['title' => 'Анна Каренина', 'year' => 1877, 'isbn' => '978-5-389-06474-6'],
            ['title' => 'Преступление и наказание', 'year' => 1866, 'isbn' => '978-5-389-05791-5'],
            ['title' => 'Братья Карамазовы', 'year' => 1880, 'isbn' => '978-5-389-06234-6'],
            ['title' => 'Идиот', 'year' => 1869, 'isbn' => '978-5-389-05792-2'],
            ['title' => 'Вишнёвый сад', 'year' => 1904, 'isbn' => '978-5-389-06476-0'],
            ['title' => 'Чайка', 'year' => 1896, 'isbn' => '978-5-389-06475-3'],
            ['title' => 'Евгений Онегин', 'year' => 1833, 'isbn' => '978-5-389-06477-7'],
            ['title' => 'Мастер и Маргарита', 'year' => 1967, 'isbn' => '978-5-699-50135-6'],
            ['title' => 'Собачье сердце', 'year' => 1925, 'isbn' => '978-5-389-06478-4'],
            ['title' => '1984', 'year' => 1949, 'isbn' => '978-5-17-080115-4'],
            ['title' => 'Скотный двор', 'year' => 1945, 'isbn' => '978-5-17-080116-1'],
            ['title' => 'Старик и море', 'year' => 1952, 'isbn' => '978-5-17-080117-8'],
            ['title' => 'Прощай, оружие!', 'year' => 1929, 'isbn' => '978-5-17-080118-5'],
            ['title' => 'Великий Гэтсби', 'year' => 1925, 'isbn' => '978-5-17-080119-2'],
            ['title' => 'Гарри Поттер и философский камень', 'year' => 1997, 'isbn' => '978-5-389-07454-1'],
            ['title' => 'Гарри Поттер и Тайная комната', 'year' => 1998, 'isbn' => '978-5-389-07455-8'],
            ['title' => 'Властелин колец: Братство кольца', 'year' => 1954, 'isbn' => '978-5-17-080120-8'],
            ['title' => 'Властелин колец: Две крепости', 'year' => 1954, 'isbn' => '978-5-17-080121-5'],
            ['title' => 'Властелин колец: Возвращение короля', 'year' => 1955, 'isbn' => '978-5-17-080122-2'],
            ['title' => 'Хоббит', 'year' => 1937, 'isbn' => '978-5-17-080123-9'],
            ['title' => 'Убить пересмешника', 'year' => 1960, 'isbn' => '978-5-17-080124-6'],
            ['title' => 'Гордость и предубеждение', 'year' => 1813, 'isbn' => '978-5-389-06479-1'],
            ['title' => 'Большие надежды', 'year' => 1861, 'isbn' => '978-5-389-06480-7'],
            ['title' => 'Приключения Оливера Твиста', 'year' => 1838, 'isbn' => '978-5-389-06481-4'],
            ['title' => 'Приключения Тома Сойера', 'year' => 1876, 'isbn' => '978-5-389-06482-1'],
            ['title' => 'Приключения Гекльберри Финна', 'year' => 1884, 'isbn' => '978-5-389-06483-8'],
            ['title' => 'Сто лет одиночества', 'year' => 1967, 'isbn' => '978-5-699-50136-3'],
            ['title' => 'Любовь во время чумы', 'year' => 1985, 'isbn' => '978-5-699-50137-0'],
            ['title' => 'Капитанская дочка', 'year' => 1836, 'isbn' => '978-5-389-06484-5'],
            ['title' => 'Дубровский', 'year' => 1841, 'isbn' => '978-5-389-06485-2'],
            ['title' => 'Мёртвые души', 'year' => 1842, 'isbn' => '978-5-389-06486-9'],
            ['title' => 'Отцы и дети', 'year' => 1862, 'isbn' => '978-5-389-06487-6'],
            ['title' => 'На дне', 'year' => 1902, 'isbn' => '978-5-389-06488-3'],
            ['title' => 'Три сестры', 'year' => 1901, 'isbn' => '978-5-389-06489-0'],
            ['title' => 'Ревизор', 'year' => 1836, 'isbn' => '978-5-389-06490-6'],
            ['title' => 'Шинель', 'year' => 1842, 'isbn' => '978-5-389-06491-3'],
            ['title' => 'Нос', 'year' => 1836, 'isbn' => '978-5-389-06492-0'],
            ['title' => 'Палата №6', 'year' => 1892, 'isbn' => '978-5-389-06493-7'],
            ['title' => 'Дама с собачкой', 'year' => 1899, 'isbn' => '978-5-389-06494-4'],
            ['title' => 'Бесы', 'year' => 1872, 'isbn' => '978-5-389-06495-1'],
            ['title' => 'Подросток', 'year' => 1875, 'isbn' => '978-5-389-06496-8'],
            ['title' => 'Игрок', 'year' => 1866, 'isbn' => '978-5-389-06497-5'],
            ['title' => 'Записки из подполья', 'year' => 1864, 'isbn' => '978-5-389-06498-2'],
            ['title' => 'Белая гвардия', 'year' => 1925, 'isbn' => '978-5-389-06499-9'],
            ['title' => 'Театральный роман', 'year' => 1937, 'isbn' => '978-5-389-06500-2'],
            ['title' => 'Роковые яйца', 'year' => 1925, 'isbn' => '978-5-389-06501-9'],
            ['title' => 'Двенадцать стульев', 'year' => 1928, 'isbn' => '978-5-389-06502-6'],
            ['title' => 'Золотой телёнок', 'year' => 1931, 'isbn' => '978-5-389-06503-3'],
            ['title' => 'Тихий Дон', 'year' => 1940, 'isbn' => '978-5-389-06504-0'],
            ['title' => 'Судьба человека', 'year' => 1956, 'isbn' => '978-5-389-06505-7'],
            ['title' => 'Доктор Живаго', 'year' => 1957, 'isbn' => '978-5-389-06506-4'],
            ['title' => 'Обломов', 'year' => 1859, 'isbn' => '978-5-389-06507-1'],
            ['title' => 'Обыкновенная история', 'year' => 1847, 'isbn' => '978-5-389-06508-8'],
            ['title' => 'Герой нашего времени', 'year' => 1840, 'isbn' => '978-5-389-06509-5'],
            ['title' => 'Мцыри', 'year' => 1840, 'isbn' => '978-5-389-06510-1'],
            ['title' => 'Демон', 'year' => 1842, 'isbn' => '978-5-389-06511-8'],
            ['title' => 'Борис Годунов', 'year' => 1831, 'isbn' => '978-5-389-06512-5'],
            ['title' => 'Руслан и Людмила', 'year' => 1820, 'isbn' => '978-5-389-06513-2'],
            ['title' => 'Пиковая дама', 'year' => 1834, 'isbn' => '978-5-389-06514-9'],
            ['title' => 'Медный всадник', 'year' => 1837, 'isbn' => '978-5-389-06515-6'],
            ['title' => 'Бахчисарайский фонтан', 'year' => 1824, 'isbn' => '978-5-389-06516-3'],
            ['title' => 'Горе от ума', 'year' => 1825, 'isbn' => '978-5-389-06517-0'],
            ['title' => 'Гроза', 'year' => 1859, 'isbn' => '978-5-389-06518-7'],
            ['title' => 'Бесприданница', 'year' => 1879, 'isbn' => '978-5-389-06519-4'],
            ['title' => 'Леди Макбет Мценского уезда', 'year' => 1865, 'isbn' => '978-5-389-06520-0'],
            ['title' => 'Очарованный странник', 'year' => 1873, 'isbn' => '978-5-389-06521-7'],
            ['title' => 'Левша', 'year' => 1881, 'isbn' => '978-5-389-06522-4'],
            ['title' => 'Невский проспект', 'year' => 1835, 'isbn' => '978-5-389-06523-1'],
            ['title' => 'Тарас Бульба', 'year' => 1835, 'isbn' => '978-5-389-06524-8'],
            ['title' => 'Вий', 'year' => 1835, 'isbn' => '978-5-389-06525-5'],
            ['title' => 'Вечера на хуторе близ Диканьки', 'year' => 1831, 'isbn' => '978-5-389-06526-2'],
            ['title' => 'Миргород', 'year' => 1835, 'isbn' => '978-5-389-06527-9'],
            ['title' => 'Петербургские повести', 'year' => 1842, 'isbn' => '978-5-389-06528-6'],
            ['title' => 'Записки охотника', 'year' => 1852, 'isbn' => '978-5-389-06529-3'],
            ['title' => 'Отцы и дети', 'year' => 1862, 'isbn' => '978-5-389-06530-9'],
            ['title' => 'Дым', 'year' => 1867, 'isbn' => '978-5-389-06531-6'],
            ['title' => 'Новь', 'year' => 1877, 'isbn' => '978-5-389-06532-3'],
            ['title' => 'Рудин', 'year' => 1856, 'isbn' => '978-5-389-06533-0'],
            ['title' => 'Дворянское гнездо', 'year' => 1859, 'isbn' => '978-5-389-06534-7'],
            ['title' => 'Накануне', 'year' => 1860, 'isbn' => '978-5-389-06535-4'],
            ['title' => 'Вешние воды', 'year' => 1872, 'isbn' => '978-5-389-06536-1'],
            ['title' => 'Первая любовь', 'year' => 1860, 'isbn' => '978-5-389-06537-8'],
            ['title' => 'Ася', 'year' => 1858, 'isbn' => '978-5-389-06538-5'],
            ['title' => 'Муму', 'year' => 1854, 'isbn' => '978-5-389-06539-2'],
            ['title' => 'Записки сумасшедшего', 'year' => 1835, 'isbn' => '978-5-389-06540-8'],
            ['title' => 'Портрет', 'year' => 1835, 'isbn' => '978-5-389-06541-5'],
            ['title' => 'Коляска', 'year' => 1836, 'isbn' => '978-5-389-06542-2'],
            ['title' => 'Женитьба', 'year' => 1842, 'isbn' => '978-5-389-06543-9'],
            ['title' => 'Игроки', 'year' => 1843, 'isbn' => '978-5-389-06544-6'],
            ['title' => 'Ревизор', 'year' => 1836, 'isbn' => '978-5-389-06545-3'],
            ['title' => 'Мёртвые души', 'year' => 1842, 'isbn' => '978-5-389-06546-0'],
            ['title' => 'Выбранные места из переписки с друзьями', 'year' => 1847, 'isbn' => '978-5-389-06547-7'],
            ['title' => 'Арап Петра Великого', 'year' => 1837, 'isbn' => '978-5-389-06548-4'],
            ['title' => 'Повести Белкина', 'year' => 1831, 'isbn' => '978-5-389-06549-1'],
            ['title' => 'Капитанская дочка', 'year' => 1836, 'isbn' => '978-5-389-06550-7'],
            ['title' => 'Дубровский', 'year' => 1841, 'isbn' => '978-5-389-06551-4'],
            ['title' => 'История села Горюхина', 'year' => 1837, 'isbn' => '978-5-389-06552-1'],
            ['title' => 'Египетские ночи', 'year' => 1837, 'isbn' => '978-5-389-06553-8'],
            ['title' => 'Станционный смотритель', 'year' => 1831, 'isbn' => '978-5-389-06554-5'],
            ['title' => 'Барышня-крестьянка', 'year' => 1831, 'isbn' => '978-5-389-06555-2'],
            ['title' => 'Гробовщик', 'year' => 1831, 'isbn' => '978-5-389-06556-9'],
            ['title' => 'Выстрел', 'year' => 1831, 'isbn' => '978-5-389-06557-6'],
            ['title' => 'Метель', 'year' => 1831, 'isbn' => '978-5-389-06558-3'],
        ];

        // Вставляем книги
        foreach ($books as $book) {
            $this->insert('{{%book}}', [
                'title' => $book['title'],
                'year' => $book['year'],
                'isbn' => $book['isbn'],
                'created_at' => time(),
                'updated_at' => time(),
            ]);
        }

        // Связи книг и авторов (book_id => [author_ids])
        $bookAuthors = [
            1 => [1],   // Война и мир - Толстой
			2 => [1],    // Анна Каренина - Толстой
			3 => [2],    // Преступление и наказание - Достоевский
			4 => [2],    // Братья Карамазовы - Достоевский
			5 => [2],    // Идиот - Достоевский
			6 => [3],    // Вишнёвый сад - Чехов
			7 => [3],    // Чайка - Чехов
			8 => [4],    // Евгений Онегин - Пушкин
			9 => [5],    // Мастер и Маргарита - Булгаков
			10 => [5],   // Собачье сердце - Булгаков
			11 => [6],   // 1984 - Оруэлл
			12 => [6],  // Скотный двор - Оруэлл
			13 => [7],   // Старик и море - Хемингуэй
			14 => [7],  // Прощай, оружие! - Хемингуэй
			15 => [8],   // Великий Гэтсби - Фицджеральд
			16 => [9],  // Гарри Поттер 1 - Роулинг
			17 => [9],  // Гарри Поттер 2 - Роулинг
			18 => [10], // Властелин колец 1 - Толкин
			19 => [10], // Властелин колец 2 - Толкин
			20 => [10], // Властелин колец 3 - Толкин
			21 => [10], // Хоббит - Толкин
			22 => [11], // Убить пересмешника - Харпер Ли
			23 => [12], // Гордость и предубеждение - Остин
			24 => [13], // Большие надежды - Диккенс
			25 => [13], // Оливер Твист - Диккенс
			26 => [14], // Том Сойер - Твен
			27 => [14], // Гекльберри Финн - Твен
			28 => [15], // Сто лет одиночества - Маркес
			29 => [15], // Любовь во время чумы - Маркес
			30 => [4],  // Капитанская дочка - Пушкин
			31 => [4],  // Дубровский - Пушкин
			32 => [16], // Мёртвые души - Гоголь
			33 => [17], // Отцы и дети - Тургенев
			34 => [18], // На дне - Горький
			35 => [3],  // Три сестры - Чехов
			36 => [16], // Ревизор - Гоголь
			37 => [16], // Шинель - Гоголь
			38 => [16], // Нос - Гоголь
			39 => [3],  // Палата №6 - Чехов
			40 => [3],  // Дама с собачкой - Чехов
			41 => [2],  // Бесы - Достоевский
			42 => [2],  // Подросток - Достоевский
			43 => [2],  // Игрок - Достоевский
			44 => [2],  // Записки из подполья - Достоевский
			45 => [5],  // Белая гвардия - Булгаков
			46 => [5],  // Театральный роман - Булгаков
			47 => [5],  // Роковые яйца - Булгаков
			48 => [19, 20], // Двенадцать стульев - Ильф и Петров
			49 => [19, 20], // Золотой телёнок - Ильф и Петров
			50 => [21], // Тихий Дон - Шолохов
			51 => [21], // Судьба человека - Шолохов
			52 => [22], // Доктор Живаго - Пастернак
			53 => [23], // Обломов - Гончаров
			54 => [23], // Обыкновенная история - Гончаров
			55 => [4],  // Герой нашего времени - Лермонтов (отсутствует в авторах, нужно добавить)
			56 => [4],  // Мцыри - Лермонтов
			57 => [4],  // Демон - Лермонтов
			58 => [4],  // Борис Годунов - Пушкин
			59 => [4],  // Руслан и Людмила - Пушкин
			60 => [4],  // Пиковая дама - Пушкин
			61 => [4],  // Медный всадник - Пушкин
			62 => [4],  // Бахчисарайский фонтан - Пушкин
			63 => [24], // Горе от ума - Грибоедов
			64 => [24], // Гроза - Островский
			65 => [24], // Бесприданница - Островский
			66 => [25], // Леди Макбет Мценского уезда - Лесков
			67 => [25], // Очарованный странник - Лесков
			68 => [25], // Левша - Лесков
			69 => [16], // Невский проспект - Гоголь
			70 => [16], // Тарас Бульба - Гоголь
			71 => [16], // Вий - Гоголь
			72 => [16], // Вечера на хуторе близ Диканьки - Гоголь
			73 => [16], // Миргород - Гоголь
			74 => [16], // Петербургские повести - Гоголь
			75 => [17], // Записки охотника - Тургенев
			76 => [17], // Отцы и дети - Тургенев
			77 => [17], // Дым - Тургенев
			78 => [17], // Новь - Тургенев
			79 => [17], // Рудин - Тургенев
			80 => [17], // Дворянское гнездо - Тургенев
			81 => [17], // Накануне - Тургенев
			82 => [17], // Вешние воды - Тургенев
			83 => [17], // Первая любовь - Тургенев
			84 => [17], // Ася - Тургенев
			85 => [17], // Муму - Тургенев
			86 => [16], // Записки сумасшедшего - Гоголь
			87 => [16], // Портрет - Гоголь
			88 => [16], // Коляска - Гоголь
			89 => [16], // Женитьба - Гоголь
			90 => [16], // Игроки - Гоголь
			91 => [16], // Ревизор - Гоголь
			92 => [16], // Мёртвые души - Гоголь
			93 => [16], // Выбранные места из переписки с друзьями - Гоголь
			94 => [4],  // Арап Петра Великого - Пушкин
			95 => [4],  // Повести Белкина - Пушкин
			96 => [4],  // Капитанская дочка - Пушкин
			97 => [4],  // Дубровский - Пушкин
			98 => [4],  // История села Горюхина - Пушкин
			99 => [4],  // Египетские ночи - Пушкин
			100 => [4], // Станционный смотритель - Пушкин
			101 => [4], // Барышня-крестьянка - Пушкин
			102 => [4], // Гробовщик - Пушкин
			103 => [4], // Выстрел - Пушкин
			104 => [4], // Метель - Пушкин
        ];

        // Вставляем связи книга-автор
        foreach ($bookAuthors as $bookId => $authorIds) {
            foreach ($authorIds as $authorId) {
                $this->insert('{{%book_author}}', [
                    'book_id' => $bookId,
                    'author_id' => $authorId,
                ]);
            }
        }
    }

    /**
     * {@inheritdoc}
     */
    public function safeDown()
    {
        $this->truncateTable('{{%book_author}}');
        $this->truncateTable('{{%book}}');
        $this->truncateTable('{{%author}}');
    }
}
